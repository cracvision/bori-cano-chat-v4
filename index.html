<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Borí Cano Chat</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

    <!-- Prefetch chat for snappy nav -->
    <link rel="prefetch" href="chat.html" />

    <!-- Preload images & audio -->
    <link rel="preload" as="image" href="https://static.wixstatic.com/media/86b1c8_c6f30851950541e1b6bd9eb200065198~mv2.png" />
    <link rel="preload" as="image" href="https://static.wixstatic.com/media/86b1c8_f3a9f2f8961748d8a79088aa8e70d4c8~mv2.png" />
    <link rel="preload" as="audio" href="https://static.wixstatic.com/mp3/86b1c8_756bcaea7d1c416a8fef9866a7565398.mp3" />

    <!-- NOTE: In repo, move CSS below into /index.css and link it. Kept inline for preview. -->
    <style>
      /* ===== Prototype landing styles (scoped to .landing) ===== */
      html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; }
      body { font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }

      body.landing {
        /* Desktop background (landscape) */
        background-image: url('https://static.wixstatic.com/media/86b1c8_c6f30851950541e1b6bd9eb200065198~mv2.png');
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
        background-color: #2a2a4e; /* Fallback */
        position: relative;
      }

      .main-title {
        position: absolute;
        top: 2rem; left: 0; right: 0;
        text-align: center; margin: 0 auto;
        font-size: clamp(2.4rem, 8vw, 5rem);
        font-weight: 700;
        background: linear-gradient(-90deg, #5104e0, #7e3bdc);
        -webkit-background-clip: text; background-clip: text; color: transparent;
        text-shadow: 0 5px 10px rgba(0,0,0,.5);
        user-select: none;
      }

      .button-container {
        position: absolute; left: 0; right: 0;
        top: clamp(7rem, 18vw, 12rem);
        display: flex; justify-content: center; align-items: center; gap: 2rem;
      }

      .action-button {
        background-color: rgba(126, 59, 220, 0.5);
        border: 2px solid #ffffff; color: #ffffff;
        padding: 0.8rem 1.8rem; border-radius: 50px;
        font-size: 1.2rem; font-weight: 700; cursor: pointer;
        transition: background-color .3s ease, transform .2s ease;
        text-shadow: 0 2px 4px rgba(0,0,0,.3);
        backdrop-filter: blur(2px);
      }
      .action-button:hover { background-color: rgba(126,59,220,.7); transform: translateY(-2px); }

      /* Mobile (portrait) */
      @media (max-width: 768px) {
        body.landing { background-image: url('https://static.wixstatic.com/media/86b1c8_f3a9f2f8961748d8a79088aa8e70d4c8~mv2.png'); }
        .main-title { font-size: clamp(1.8rem, 8.5vw, 3rem); top: 1.75rem; text-shadow: 0 3px 6px rgba(0,0,0,.5); }
        .button-container { top: 8rem; gap: 1rem; }
        .action-button { font-size: 1rem; padding: 0.6rem 1.5rem; }
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .action-button { transition: none; }
      }
    </style>
  </head>
  <body class="landing">
    <h1 class="main-title">Borí Cano Chat</h1>

    <div class="button-container" role="group" aria-label="Acciones del landing">
      <button id="btnListen" class="action-button" aria-pressed="false" aria-label="Reproducir saludo">Escúchame</button>
      <button id="btnChat" class="action-button" aria-label="Ir al chat">Hablemos en Vivo</button>
    </div>

    <!-- Audio greeting -->
    <audio id="landingAudio" preload="auto" src="https://static.wixstatic.com/mp3/86b1c8_756bcaea7d1c416a8fef9866a7565398.mp3"></audio>

    <script>
      (function(){
        const audio = document.getElementById('landingAudio');
        const listenBtn = document.getElementById('btnListen');
        const chatBtn = document.getElementById('btnChat');
        let playing = false;

        function setListenUI(state){
          playing = state;
          listenBtn.setAttribute('aria-pressed', state ? 'true' : 'false');
          listenBtn.textContent = state ? 'Pausar' : 'Escúchame';
        }

        listenBtn.addEventListener('click', async () => {
          try {
            if (!playing) { await audio.play(); setListenUI(true); }
            else { audio.pause(); audio.currentTime = 0; setListenUI(false); }
          } catch (err) {
            console.warn('Audio play failed:', err);
            alert('No se pudo reproducir el audio. Revisa permisos/volumen.');
          }
        });

        audio.addEventListener('ended', () => setListenUI(false));
        audio.addEventListener('pause', () => { if (!audio.ended) setListenUI(false); });

        chatBtn.addEventListener('click', () => { window.location.href = 'chat.html'; });

        // Gentle prefetch of chat after a short delay
        window.addEventListener('load', () => {
          setTimeout(() => {
            const l = document.createElement('link');
            l.rel = 'prefetch'; l.href = 'chat.html';
            document.head.appendChild(l);
          }, 1200);
        });
      })();
    </script>
  </body>
</html>
